import{o as e,c as t,a as n,b as s,m as r,t as o,d as a,F as i,r as l,T as d,w as h,e as g,f as m,g as c,h as u,s as p,i as v,v as w,j as y,k as f,l as x,n as b,p as k,q as S,u as C,x as $}from"./vendor.5d5d0c67.js";const I=["green","blue","red","yellow","indigo","purple","pink"];var W={props:["event","widthPerDay","startYear","columnWidth"],data:()=>({imageStatus:"not loaded",images:[],showingImages:!1}),computed:{hasImages(){return!!this.event.event.googlePhotosLink},eventRowStyle(){return`margin-left: ${this.getLeftMarginForDate(this.event,this.event.range.from)}px`},photoBarClass(){let e="photoBar transition rounded-lg shadow ";const t=this.event.event.tags[0];return this.$store.getters.tags[t]?I.includes(this.$store.getters.tags[t])&&(e+=`bg-${this.$store.getters.tags[t].toLowerCase()}-300 `):e+="bg-gray-300 ",e},eventBarClass(){let e="eventBar transition opacity-50 rounded-lg shadow ";const t=this.event.event.tags[0];return this.$store.getters.tags[t]?I.includes(this.$store.getters.tags[t])&&(e+=`bg-${this.$store.getters.tags[t].toLowerCase()}-300 `):e+="bg-gray-300 ",e},barColor(){let e="";const t=this.event.event.tags[0];return this.$store.getters.tags[t]&&!I.includes(this.$store.getters.tags[t])&&(e+=` background-color: ${this.$store.getters.tags[t]}`),e},eventBarStyle(){return`width: ${this.getWidthForRange(this.event.range)}px; ${this.barColor}`},photoBarStyle(){return`width: 10px; ${this.barColor}; top: calc(0.5rem + 1px)`}},methods:{async loadImages(){this.imageStatus="loading";const e=await fetch(`https://k.npkn.net/google-photos/${this.event.event.googlePhotosLink}`);this.images=await e.json(),this.imageStatus="loaded"},togglePhotos(){this.showingImages=!this.showingImages,"not loaded"===this.imageStatus&&this.loadImages()},getWidthForRange(e){return Math.max(10,Math.max(1,e.numDays())*this.widthPerDay)},getLeftMarginForDate(e,t){let n=(e.startingYear()-this.startYear)*this.columnWidth;if(t.month){const e=this.columnWidth/12*(t.month-1);return t.day?n+e+(t.day-1)*(this.columnWidth/12/30):n+e}return n+0}}};const M={class:"flex flex-row"},D={class:"eventDate"},T={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-2 mb-px",viewBox:"0 0 20 20",fill:"currentColor"},B=s("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"},null,-1),P={key:1,class:"animate-spin h-3 w-3 ml-3 mb-px",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),L=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),A={key:1,class:"bg-gray-900 rounded p-2 -mx-2 inline-flex mt-1 relative shadow-lg",style:{"max-width":"100vw"}},E=s("div",{class:"ml-2 mr-3"},null,-1),F={class:"flex flex-row overflow-x-scroll items-center rounded"};W.render=function(d,h,g,m,c,u){return e(),t("div",{class:"eventRow flex flex-col relative",style:u.eventRowStyle},[c.showingImages?(e(),t("div",{key:0,class:[u.photoBarClass,"absolute left-0 mr-2 bottom-2 z-20 opacity-50"],style:u.photoBarStyle},null,6)):n("",!0),s("div",M,[s("div",r({class:["\n          eventItem\n          flex-row\n          items-center\n          flex\n          rounded\n          -mx-2\n          px-2\n          py-1\n          transition\n        ",{"hover:bg-gray-800 hover:shadow-lg":!!g.event.event.googlePhotosLink,"bg-gray-900 shadow-lg":c.showingImages,"cursor-pointer":!!g.event.event.googlePhotosLink}]},o(g.event.event.googlePhotosLink?{click:u.togglePhotos}:{})),[s("div",{class:u.eventBarClass,style:u.eventBarStyle},null,6),s("p",D,a(g.event.getDateHtml()),1),g.event.event.googlePhotosLink&&"loading"!==c.imageStatus?(e(),t("svg",T,[B])):g.event.event.googlePhotosLink&&"loading"===c.imageStatus?(e(),t("svg",P,[H,L])):n("",!0),s("p",{class:"eventTitle ml-2",innerHTML:g.event.getInnerHtml()},null,8,["innerHTML"])],16)]),c.showingImages&&"loaded"===c.imageStatus&&c.images.length>0?(e(),t("div",A,[E,s("div",F,[(e(!0),t(i,null,l(c.images,((n,r)=>(e(),t("a",{href:g.event.event.googlePhotosLink,key:n,class:{"mr-2":r!==c.images.length-1}},[s("img",{src:n,class:"rounded max-w-none z-30"},null,8,["src"])],10,["href"])))),128))])])):n("",!0)],4)};var Y={props:["year","columnWidth"],methods:{styleForMonth(e){const t={top:"0px",left:e*(this.columnWidth/12)+"px"};if(0!==e&&12!==e&&this.columnWidth>600){let e=.2;t["border-left"]=`1px dashed rgba(128, 128, 128, ${e+this.columnWidth/1600*.3})`}return t}},computed:{yearColumnStyle(){let e;return e=this.columnWidth<80?(this.columnWidth-30)/70:1,e=this.year%10==0?.678:.678*e,`width: ${this.columnWidth}px; border-left: 1px dashed rgba(128, 128, 128, ${e})`},yearStyle(){let e;e=this.columnWidth<80?(this.columnWidth-30)/70:1;return`background: linear-gradient(to bottom, #384047, ${67*e}%, #38404700); color: ${this.year%10==0?"white":`rgba(255, 255, 255, ${e})`};`}}};Y.render=function(n,r,o,d,h,g){return e(),t("div",{class:"year flex-shrink-0 relative",style:g.yearColumnStyle},[s("h6",{class:"yearTitle text-sm",style:g.yearStyle},a(o.year),5),(e(),t(i,null,l([0,1,2,3,4,5,6,7,8,9,10,11],(e=>s("div",{class:"absolute h-full",key:e,style:g.styleForMonth(e)},null,4))),64))],4)};var V={components:{EventRow:W,Year:Y},data:()=>({panning:{}}),computed:{containerStyle(){return`width: ${this.columnWidth*this.numColumns}px`},isPanning(){var e,t,n,s;return!!(null==(t=null==(e=this.panning)?void 0:e.mouseStart)?void 0:t.x)&&!!(null==(s=null==(n=this.panning)?void 0:n.mouseStart)?void 0:s.y)},columnWidth(){return this.$store.state.settings.yearWidth},years(){const e=this.$store.getters.events;if(!e||0===e.length)return{start:2010,end:2020};let t=e[0].startingYear(),n=e[0].getNextYear();for(let s of e)s.startingYear()<t&&(t=s.startingYear()),s.getNextYear()>n&&(n=s.getNextYear());return{start:t-1,end:n+2+Math.floor(100/this.columnWidth*5)}},numColumns(){return this.years.end-this.years.start},numRows(){return this.$store.getters.events.length+1},widthPerDay(){return this.columnWidth/12/30}},methods:{mouseDown(e){e.stopPropagation();const t=document.getElementById("timelineContainer");t.style.cssText="cursor: grabbing;",this.panning={mouseStart:{x:e.clientX,y:e.clientY},containerStart:{x:t.scrollLeft,y:t.scrollTop}}},mouseUp(e){document.getElementById("timelineContainer").style.cssText="cursor: grab;",this.panning={}},mouseMove(e){if(!this.isPanning)return;e.stopPropagation();const t=document.getElementById("timelineContainer");t.scrollLeft=this.panning.containerStart.x+(this.panning.mouseStart.x-e.clientX),t.scrollTop=this.panning.containerStart.y+(this.panning.mouseStart.y-e.clientY)},range:(e,t=0)=>[...Array(e).keys()].map((e=>e+t))}};const j={id:"years",class:"flex absolute inset-0 pointer-events-none"},N={id:"events"},R=s("div",{class:"h-24"},null,-1),z=s("div",{style:{height:"50vh"}},null,-1);V.render=function(n,r,o,a,m,c){const u=g("year"),p=g("event-row");return e(),t("div",{class:"relative",style:c.containerStyle},[s("div",j,[(e(!0),t(i,null,l(c.range(c.years.end-c.years.start+1,c.years.start),(n=>(e(),t(u,{key:n,year:n,columnWidth:c.columnWidth},null,8,["year","columnWidth"])))),128))]),s("div",N,[R,s(d,{name:"eventRow"},{default:h((()=>[(e(!0),t(i,null,l(n.$store.getters.filteredEvents,(n=>(e(),t(p,{key:n.eventString,event:n,widthPerDay:c.widthPerDay,startYear:c.years.start,columnWidth:c.columnWidth},null,8,["event","widthPerDay","startYear","columnWidth"])))),128))])),_:1}),z])],4)};const O={props:["item"]},G={class:"flex flex-row items-center mr-2"},U=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),K={class:"ml-auto mt-1"},J=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1);O.render=function(n,r,o,i,l,d){return e(),t("div",{class:"\n      cursor-pointer\n      flex flex-row\n      align-baseline\n      mb-1\n      hover:bg-blue-500\n      rounded\n      px-2\n      py-1\n      transition-color\n      duration-100\n    ",onClick:r[2]||(r[2]=e=>n.$emit("selected",o.item))},[s("div",G,[U,m(" "+a(o.item),1)]),s("div",K,[(e(),t("svg",{onClick:r[1]||(r[1]=c((e=>n.$emit("deleteItem",o.item)),["prevent","stop"])),xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 hover:text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[J]))])])};var Z={components:{TimelineItem:O},methods:{selected(e){this.$store.commit("setCurrentTimeline",e)},deleteItem(e){confirm(`Delete ${e}?`)&&this.$store.commit("removeTimeline",e)}}};const X={class:"flex flex-col flex-grow"},_=s("h3",{class:"text-xl border-b"},"My cascades",-1),q={key:0,class:"mt-1"},Q={key:1,class:""},ee=s("div",{class:""},"No saved cascades",-1);Z.render=function(n,s,r,o,a,d){const h=g("timeline-item");return e(),t("div",X,[_,n.$store.state.list&&n.$store.state.list.length>0?(e(),t("div",q,[(e(!0),t(i,null,l(n.$store.state.list,(n=>(e(),t(h,{key:n,item:n,onSelected:d.selected,onDeleteItem:d.deleteItem},null,8,["item","onSelected","onDeleteItem"])))),128))])):(e(),t("div",Q,[ee]))])};const te={data:()=>({emailAddress:null,emailStatus:"not sent",user:null}),mounted(){u().onAuthStateChanged((e=>{this.user=e}))},computed:{buttonText(){return"not sent"===this.emailStatus?"Send signin link":"sending"===this.emailStatus?"Sending...":"sent"===this.emailStatus?"Sent. Check your inbox.":void 0}},methods:{signOut(){confirm("Sign out?")&&u().signOut()},async submit(){if("sending"===this.emailStatus)return;this.emailStatus="sending";const e=this.emailAddress,t=u(),n={url:"https://cascade.page",handleCodeInApp:!0};try{await p(t,e,n),this.emailStatus="sent",localStorage.setItem("emailForSignIn",e)}catch(s){alert("Error sending signin email: "+s)}}}},ne={class:"my-3"},se={key:0,class:"text-red-400"},re={key:1,class:"text-gray-300"};te.render=function(r,o,i,l,d,h){return e(),t("div",ne,[d.user?(e(),t("h3",re,a(d.user.email),1)):(e(),t("h3",se,"Not signed in")),s("form",{onSubmit:o[3]||(o[3]=c(((...e)=>h.submit&&h.submit(...e)),["prevent"]))},[d.user||"sent"===d.emailStatus?n("",!0):v((e(),t("input",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>d.emailAddress=e),id:"email",type:"email",placeholder:"Email address",class:"px-1 text-black mt-1 w-full rounded"},null,512)),[[w,d.emailAddress]]),d.user?(e(),t("button",{key:1,class:"\n          whitespace-nowrap\n          w-full\n          disabled:text-gray-400\n          disabled:bg-blue-900\n          rounded\n          bg-blue-100\n          mt-3\n          px-2\n          rounded\n          items-center\n          bg-blue-800\n          hover:bg-blue-700\n          transition-all\n          duration-100\n          text-gray-200\n          hover:text-gray-50\n        ",onClick:o[2]||(o[2]=(...e)=>h.signOut&&h.signOut(...e))}," Sign out ")):(e(),t("button",{key:2,disabled:!d.emailAddress||"sending"===d.emailStatus||"sent"===d.emailStatus,class:"\n          whitespace-nowrap\n          w-full\n          disabled:text-gray-400\n          disabled:bg-blue-900\n          rounded\n          bg-blue-100\n          mt-3\n          px-2\n          rounded\n          items-center\n          bg-blue-800\n          hover:bg-blue-700\n          transition-all\n          duration-100\n          text-gray-200\n          hover:text-gray-50\n        "},a(h.buttonText),9,["disabled"]))],32)])};var oe={components:{Storage:Z,SignIn:te}};const ae={class:"flex flex-col order-2 md:order-1 md:mr-4"};oe.render=function(n,r,o,a,i,l){const d=g("Storage"),h=g("sign-in");return e(),t("div",ae,[s(d),s(h)])};class ie{constructor(e){"now"===e&&(e=(new Date).toLocaleDateString());let[t,n,s]=e.split("/").reverse();const r=parseInt(t);this.year=r,n&&(s?(this.month=parseInt(s),this.day=parseInt(n)):this.month=parseInt(n))}}class le{constructor(e){this.originalString=e;const t=e.indexOf("//");t>=0&&(e=e.substring(0,t));const[n,s]=e.split("-");this.from=new ie(n),this.to=s?new ie(s):void 0}getNextYear(){return this.to?this.to.year+1:this.from.year+1}startingDay(){return{year:this.from.year,month:this.from.month?this.from.month:1,day:this.from.day?this.from.day:1}}endingDay(){return this.to?{year:this.to.year,month:this.to.month?this.to.month:12,day:this.to.day?Math.min(this.to.day,30):30}:{year:this.from.year,month:this.from.month?this.from.month:12,day:this.from.day?Math.min(this.from.day,30):30}}numDays(){return le.numDaysBetween(this.startingDay(),this.endingDay())}static numDaysBetween(e,t){let n;if(e.year===t.year)n=30*(t.month-e.month)+(t.day-e.day)+1;else{const s=le.numDaysBetween(e,{year:e.year,month:12,day:30}),r=le.numDaysBetween({year:t.year,month:1,day:1},t);n=s+360*(t.year-e.year-1)+r}return n}}class de{constructor(e){this.linkRegex=/\[([\w\s\d\.]+)\]\((https?:\/\/[\w\d./?=#]+)\)/g,this.googlePhotosRegex=/(?:https:\/\/)?photos.app.goo.gl\/\w+/g,e=e.replace(this.googlePhotosRegex,(e=>(this.googlePhotosLink=e,"")));let t=de.reverseString(e);const n=new Set;let s;this.tags=[];let r=0;for(;null!==(s=/(?:^(\w+)# )/gm.exec(t));)s.forEach(((e,t)=>{if(1===t){const t=de.reverseString(e);n.has(t)||(n.add(t),this.tags.push(t)),r=e.length+2}})),t=t.substring(r);this.eventDescription=de.reverseString(t.trim())}getInnerHtml(){return this.eventDescription.replace(this.linkRegex,((e,t,n)=>`<a class="underline" href="${n}">${t}</a>`))}static reverseString(e){return e.split("").reverse().join("")}}class he{constructor(e,t,n){this.eventString=e,this.range=t,this.event=n}startingYear(){return this.range.from.year}getNextYear(){return this.range.getNextYear()}getInnerHtml(){return this.event.getInnerHtml()}getDateHtml(){return this.range.originalString}static fromString(e){const t=e.indexOf(":");if(-1===t)return;const n=e.substring(0,t).trim(),s=new le(n),r=new de(e.substring(t+1).trim());return new he(e,s,r)}}const ge=["green","blue","red","yellow","indigo","purple","pink"],me=localStorage.getItem("timelines");let ce=me?me.split(","):[];const ue=ce.length>0?ce[0]:"",pe=ue?localStorage.getItem(ue):"// Comments start with two slashes: `//`\n// Tags start with a pound sign: `#`\n\n// Add a shareable google photos link to display images. Events with the image icon have displayable images.\n\n// This is an indication that events tagged `#Work` will be colored #e13\n#Work: #e13\n\n08/2008-05/2012: Psych degree #Education\n02/2010-06/2012: Dispatcher #Work\n10/2010: Barn built across the street https://photos.app.goo.gl/Er9D81cdiE2tUwDZA\n06/2011-08/2011: Westover Air Reserve Base https://photos.app.goo.gl/NZ5rnGS7vZTXHe7aA #Work\n\n// 2013\n03/15/2013-04/2015: China https://photos.app.goo.gl/4UEkw3EbUkUuNzKGA #Work\n\n// 2014\n07/2014: 4th of July in DC https://photos.app.goo.gl/d418j6GSkCD5LGmY8\n\n// 2015\n05/2015-08/2015: Summer classes so I can graduate in two years #Education\n05/2015: James graduation\n06/2015: Built desk\n06/2015: Kim and Matt wedding\n08/2015-05/2017: CS degree #Education\n\n// 2016\n05/22/2016-08/12/2016: Cardinal Health #Work\n08/16/2016-08/27/2016: Italy\n\n// 2017\n05/2017-05/2018: Cladwell #Work\n06/10/2017-06/17/2017: The Hague & Copenhagen\n\n// 2018\n07/21/2018-07/22/2018: Chicago\n07/26/2018-07/31/2018: LA and Seattle (interviewing)\n08/04/2018-08/14/2018: Mexico City\n09/05/2018-09/11/2018: Hong Kong and Macau\n09/19/2018-09/22/2018: Road trip to Seattle\n10/01/2018-01/2021: [Google](https://www.google.com) #Work\n12/28/2018-12/29/2018: Nemacolin and Fallingwater\n\n// 2019\n06/08/2019: Paula's wedding\n07/04/2019: 4th of July in Seattle with siblings\n08/23/2019-08/27/2019: SF and Bishop's Ranch\n09/2019: Hawaii with Google\n12/20/2019-12/22/2019: Train from Seattle to Chicago\n12/2019: Christmas at home, Dad to hospital\n\n// 2020\n02/29/2020: Molly and Kaitlyn to Seattle (thus starting covid)\n03/28/2020: James to Austin\n05/24/2020: Sold the Impala\n07/2020: Oregon & Crater Lake\n08/2020: Mt. Rainier\n08/2020: Oak Island\n09/2020: Hurricane Ridge\n9/2020: Trip to Coeur d'Alene\n11/2020: Trip to Denver\n12/2020: Reese\n12/25/2020: Christmas in Blaine\n\n// 2021\n01/2021: qr.new featured on [Hacker News](https://news.ycombinator.com/item?id=25481772)\n02/2021: Hawaii\n02/01/2021-now: Working on [swink](https://sw.ink) full time #Work\n05/25/2021: [cascade.page](https://cascade.page) featured on [Hacker News](https://news.ycombinator.com/item?id=27282842)\n06/05/2021-06/12/2021: Ohio and James's Party\n08/11/2021-08/17/2021: Cincinnati https://photos.app.goo.gl/h5CfrZamP5Tw6yDn7";var ve=y({state:()=>({list:ce,currentTimelineName:ue,settings:{yearWidth:120},filter:new Set,eventsString:pe}),mutations:{setCurrentTimeline(e,t){var n;e.eventsString=null!=(n=localStorage.getItem(t))?n:"",e.currentTimelineName=t},removeTimeline(e,t){if(localStorage.removeItem(t),e.list.splice(e.list.indexOf(t),1),localStorage.setItem("timelines",e.list.join(",")),e.currentTimelineName===t&&e.list.length>0){const t=e.list[0];e.eventsString=localStorage.getItem(t)||""}else e.eventsString=""},saveTimeline(e,t){localStorage.setItem(t,e.eventsString||""),e.list.includes(t)||(e.list.push(t),localStorage.setItem("timelines",e.list.join(",")))},setYearWidth(e,t){e.settings.yearWidth=t},setEventsString(e,t){e.eventsString=t},clearFilters(e){e.filter.clear()},filterTag(e,t){e.filter.has(t)?e.filter.delete(t):e.filter.add(t)}},getters:{trimmedAndFilteredEntries:e=>e.eventsString.split("\n").filter((e=>!!e&&null===e.match(/^\s*\/\/.*/))).map((e=>e.trim())),events:(e,t)=>t.trimmedAndFilteredEntries.filter((e=>!e.startsWith("!")&&!e.startsWith("#"))).map(he.fromString).filter((e=>!!e)),filteredEvents:(e,t)=>t.events.filter((t=>0===e.filter.size||t.event.tags.some((t=>e.filter.has(t))))),tags(e,t){let n=0;const s=new Set(t.events.flatMap((e=>e.event.tags))),r=t.trimmedAndFilteredEntries.filter((e=>e.startsWith("#"))).map((e=>e.substring(1).split(": "))),o={};for(let a of r)o[a[0]]=a[1];for(let a of s)o[a]||(o[a]=ge[n++%ge.length]);return o}}}),we={methods:{buttonClass(e){const t=this.$store.getters.tags[e];return ge.includes(t)?`bg-${t}-300`:""},buttonStyle(e){const t=this.$store.getters.tags[e];return ge.includes(t)?"":`background-color: ${t}`},filterTag(e){this.$store.commit("filterTag",e)},clearFilters(){this.$store.commit("clearFilters")}}};const ye={class:"flex flex-row",style:{"flex-wrap":"nowrap","overflow-x":"auto","--webkit-overflow-scrolling":"touch"}},fe=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 md:mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1),xe=s("span",{class:"hidden md:block"},"Show all tags",-1),be={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ke=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1),Se={class:"hidden md:block md:ml-2"};we.render=function(r,o,d,h,g,m){return e(),t("div",ye,[Object.keys(r.$store.getters.tags).length>0?(e(),t("button",{key:0,class:"\n        mr-2\n        rounded\n        bg-gray-800\n        hover:bg-gray-700\n        md:px-2\n        md:py-0\n        p-1\n        flex flex-row\n        items-center\n      ",onClick:o[1]||(o[1]=(...e)=>m.clearFilters&&m.clearFilters(...e))},[fe,xe])):n("",!0),(e(!0),t(i,null,l(Object.keys(r.$store.getters.tags),(o=>(e(),t("button",{class:"\n        flex flex-row\n        items-center\n        mr-2\n        rounded\n        bg-gray-800\n        hover:bg-gray-700\n        md:px-2\n        md:py-0\n        p-1\n      ",key:o,onClick:e=>m.filterTag(o)},[s("div",{class:["h-4 w-4 rounded",m.buttonClass(o)],style:m.buttonStyle(o)},[r.$store.state.filter.has(o)?(e(),t("svg",be,[ke])):n("",!0)],6),s("span",Se,a(o),1)],8,["onClick"])))),128))])};const Ce={data(){let e=Math.log(10);const t=(Math.log(1600)-e)/1e3;return{width:(Math.log(this.$store.state.settings.yearWidth)-e)/t+0}},watch:{width(e,t){let n=Math.log(10);const s=(Math.log(1600)-n)/1e3;this.$store.commit("setYearWidth",Math.exp(n+s*(e-0)))}}},$e={class:"flex flex-col mx-2"};Ce.render=function(n,r,o,a,i,l){return e(),t("div",$e,[v(s("input",{type:"range",min:"0",max:"1000","onUpdate:modelValue":r[1]||(r[1]=e=>i.width=e),class:"my-1"},null,512),[[w,i.width]])])};const Ie={components:{Tags:we,DisplaySettings:Ce},props:["modelValue"]},We={class:"flex flex-row pb-2"},Me=s("div",{class:"underline flex items-end"},[s("a",{href:"https://github.com/kochrt/cascade.page",target:"_blank"},"GitHub")],-1),De={class:"hidden md:block"},Te={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Be=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),Pe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},He=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},null,-1);Ie.render=function(r,o,i,l,d,h){const m=g("display-settings"),c=g("tags");return e(),t("div",We,[Me,s(m),s(c),s("button",{class:"ml-auto hover:bg-gray-500 rounded px-3 flex flex-row items-center",onClick:o[1]||(o[1]=e=>r.$emit("update:modelValue",!i.modelValue))},[s("span",De,a(i.modelValue?"Expand":"Collapse"),1),i.modelValue?n("",!0):(e(),t("svg",Te,[Be])),i.modelValue?(e(),t("svg",Pe,[He])):n("",!0)])])};const Le={methods:{save(){const e=prompt("Save cascade as: ",this.$store.state.currentTimelineName);e&&this.$store.commit("saveTimeline",e)}}},Ae={class:"mt-3"},Ee=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Fe=m(" Save cascade ");Le.render=function(n,r,o,a,l,d){return e(),t(i,null,[v(s("textarea",{class:"flex-grow p-2 font-mono text-sm w-full text-gray-300 bg-gray-900",name:"eventsField",rows:"12",wrap:"off","onUpdate:modelValue":r[1]||(r[1]=e=>n.$store.state.eventsString=e)},null,512),[[w,n.$store.state.eventsString]]),s("div",Ae,[s("button",{class:"\n        flex flex-row\n        items-center\n        px-2\n        bg-blue-800\n        rounded\n        hover:bg-blue-700\n        transition-all\n        duration-100\n        text-gray-200\n        hover:text-gray-50\n      ",onClick:r[2]||(r[2]=(...e)=>d.save&&d.save(...e))},[Ee,Fe])])],64)};var Ye={components:{Storage:Z,Profile:oe,DrawerHeader:Ie,TimelineEditor:Le},data:()=>({collapsed:!1})};const Ve={class:"\n      fixed\n      bottom-0\n      left-0\n      right-0\n      pt-2\n      px-2\n      z-30\n      backdrop-filter backdrop-blur-2xl\n      border-t border-gray-600\n      flex flex-col\n      overflow-hidden\n    ",style:{"max-height":"50vh"}},je={class:"flex flex-col md:flex-row pt-1 overflow-auto"},Ne={class:"flex flex-col mb-3 w-full order-1 md:order-2"};Ye.render=function(n,r,o,a,i,l){const d=g("drawer-header"),h=g("profile"),m=g("timeline-editor");return e(),t("div",Ve,[s(d,{modelValue:i.collapsed,"onUpdate:modelValue":r[1]||(r[1]=e=>i.collapsed=e)},null,8,["modelValue"]),v(s("div",je,[s(h),s("div",Ne,[s(m)])],512),[[f,!i.collapsed]])])};var Re={components:{Sidebar:Ye,Timeline:V,Storage:Storage},async mounted(){const e=u();if(!x(e,window.location.href))return;let t=window.localStorage.getItem("emailForSignIn");if(t||(t=window.prompt("Confirm your email to sign in")),t){try{await b(e,t,window.location.href)}catch(n){alert(n)}localStorage.removeItem("emailForSignIn")}else alert("Missing email!")}};Re.render=function(n,r,o,a,i,l){const d=g("timeline"),h=g("sidebar");return e(),t("div",null,[s(d),s(h)])};var ze=k({name:"App",components:{MainVue:Re}});ze.render=function(n,s,r,o,a,i){const l=g("main-vue");return e(),t(l)};C(S({apiKey:"AIzaSyCWzyvdh_bxpqGgmNTjTZ833Dta4_XzKeU",authDomain:"timelinecascade.firebaseapp.com",projectId:"timelinecascade",storageBucket:"timelinecascade.appspot.com",messagingSenderId:"814631906805",appId:"1:814631906805:web:bc719ed95ad32438bdc4bc",measurementId:"G-GKJKQL44VC"}));const Oe=$(ze);Oe.use(ve),Oe.mount("#app");
